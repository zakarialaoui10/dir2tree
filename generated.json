{
  ".github": {
    "workflows": {
      "Master": {
        "content": "name: Node.js CI\r\non:\r\n  push:\r\n    branches: [ \"main\" ]\r\n  pull_request: \r\n    branches: [ \"main\" ]\r\njobs:\r\n  build:\r\n    permissions:\r\n      contents: write \r\n    runs-on: ubuntu-latest\r\n    strategy:\r\n      matrix:\r\n        node-version: [18.x]\r\n    steps:\r\n    - uses: actions/checkout@v3\r\n    - name: Use Node.js ${{ matrix.node-version }}\r\n      uses: actions/setup-node@v3\r\n      with:\r\n        node-version: ${{ matrix.node-version }}\r\n        cache: 'npm'\r\n    - run: npm ci\r\n    - run: npm start\r\n    - name: Commit & Push\r\n      run: |\r\n          git config user.name github-actions\r\n          git config user.email github-actions@github.com\r\n          git add -A .\r\n          git commit -m \"generated\"\r\n          git push\r\n      env:\r\n        GITHUB_TOKEN: ${{ secrets.GH_PAT }}\r\n",
        "stats": {
          "length": 792,
          "size": 0.7734375,
          "lines": 33
        },
        "metadata": {
          "created": "2023-10-26T09:56:36.545Z",
          "modified": "2023-10-26T09:56:36.545Z",
          "permissions": 33206
        }
      },
      "npm publish": {
        "content": "name: Publish Node.js Package\r\n \r\non:\r\n  release:\r\n    types: [created]\r\n\r\njobs:\r\n  build:\r\n    runs-on: ubuntu-latest\r\n    steps:\r\n      - uses: actions/checkout@v3\r\n      - uses: actions/setup-node@v3\r\n        with:\r\n          node-version: 16\r\n      - run: npm ci\r\n\r\n  publish-gpr:\r\n    needs: build\r\n    runs-on: ubuntu-latest\r\n    permissions:\r\n      contents: read\r\n      packages: write\r\n    steps:\r\n      - uses: actions/checkout@v3\r\n      - uses: actions/setup-node@v3\r\n        with:\r\n          node-version: 16\r\n          registry-url: https://npm.pkg.github.com/\r\n      - run: npm ci\r\n      - run: npm publish\r\n        env:\r\n          NODE_AUTH_TOKEN: ${{secrets.NPM_TOKEN}}\r\n",
        "stats": {
          "length": 687,
          "size": 0.6708984375,
          "lines": 33
        },
        "metadata": {
          "created": "2023-10-26T09:56:36.552Z",
          "modified": "2023-10-26T09:56:36.552Z",
          "permissions": 33206
        }
      },
      "Slave": {
        "content": "name: Node.js App CI\r\n  \r\non: \r\n  push: \r\n    branches:\r\n      - main\r\n    paths:\r\n      - '.github/**'\r\njobs:\r\n  build:\r\n    permissions :\r\n      contents : write\r\n    runs-on: ubuntu-latest\r\n\r\n    steps:\r\n      - name: Checkout code\r\n        uses: actions/checkout@v2\r\n        with:\r\n          ref: ${{ github.head_ref }}\r\n\r\n      - name: Set up Node.js\r\n        uses: actions/setup-node@v2.1.5\r\n        with:\r\n          node-version: 14\r\n\r\n      - name: Generate Directory Tree\r\n        uses: zakarialaoui10/dir2tree@main\r\n      - name: Commit & Push\r\n        run: |\r\n          git config user.name github-actions\r\n          git config user.email github-actions@github.com\r\n          git add -A .\r\n          git commit -m \"generated\"\r\n          git push\r\n        env:\r\n          CUSTOM_TOKEN: ${{ secrets.CUSTOM_TOKEN }}\r\n          OWNER : ${{github.repository_owner}}\r\n          NAME  : ${{github.event.repository.name}}\r\n        \r\n",
        "stats": {
          "length": 936,
          "size": 0.9140625,
          "lines": 40
        },
        "metadata": {
          "created": "2023-10-26T09:56:36.552Z",
          "modified": "2023-10-26T10:03:53.349Z",
          "permissions": 33206
        }
      }
    }
  },
  "addons": {
    "callbacks": {
      "content": "const fs=require(\"fs\")\r\nconst path=require(\"path\");\r\n\r\nconst marked=require_if_installed(\"marked\");\r\n\r\n// Native \r\n\r\n// Marked.js\r\nconst markdown_to_html=(filePath,fileInfo)=>{\r\n    const extension = path.basename(filePath).split(\".\")[1];\r\n    if(marked && extension==\"md\")fileInfo.html=marked.parse(fs.readFileSync(filePath,\"utf-8\"));\r\n}\r\n// Highlight.js\r\nconst highlight=()=>{}\r\n// Crypto.js\r\nconst crypt=()=>{}\r\nconst decrypt=()=>{}\r\n// Sheet.js\r\nconst xls2json=()=>{}\r\nconst json2xls=()=>{}\r\n// fetch-dom \r\n// \r\nconst img2x=()=>{}\r\n\r\nmodule.exports={require_if_installed}",
      "stats": {
        "length": 575,
        "size": 0.5615234375,
        "lines": 25
      },
      "metadata": {
        "created": "2023-10-26T09:56:37.240Z",
        "modified": "2023-10-26T10:29:52.582Z",
        "permissions": 33206
      }
    },
    "marked": {
      "content": "const {require_if_installed}=require(\"./utils.js\");\r\nconst path=require(\"path\");\r\nconst fs=require(\"fs\")\r\nconst marked=require_if_installed(\"marked\");\r\nconst markdown_to_html=(filePath,fileInfo)=>{\r\n  const extension = path.basename(filePath).split(\".\")[1];\r\n  if(marked && extension==\"md\")fileInfo.html=marked.parse(fs.readFileSync(filePath,\"utf-8\"));\r\n}\r\nmodule.exports={markdown_to_html}",
      "stats": {
        "length": 390,
        "size": 0.380859375,
        "lines": 9
      },
      "metadata": {
        "created": "2023-10-26T10:23:56.110Z",
        "modified": "2023-10-26T10:35:01.254Z",
        "permissions": 33206
      }
    },
    "utils": {
      "content": "function require_if_installed(pckg) {\r\n    try {\r\n      return require(pckg);\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  }\r\nmodule.exports={require_if_installed}",
      "stats": {
        "length": 167,
        "size": 0.1630859375,
        "lines": 8
      },
      "metadata": {
        "created": "2023-10-26T10:24:08.223Z",
        "modified": "2023-10-26T10:35:27.656Z",
        "permissions": 33206
      }
    }
  },
  "Automation": {
    "Auth": {
      "Schema": {
        "content": "\r\n",
        "stats": {
          "length": 2,
          "size": 0.001953125,
          "lines": 2
        },
        "metadata": {
          "created": "2023-10-26T09:56:36.557Z",
          "modified": "2023-10-26T09:56:36.557Z",
          "permissions": 33206
        }
      }
    },
    "index": {
      "content": "const fs=require(\"fs\");\r\nconst path=require(\"path\");\r\nconst dir2tree=require(\"dir2tree\");\r\nconst {markdown_to_html}=require(\"../addons/marked.js\")\r\nconst ROOT = path.join(process.cwd(),'.');\r\nconst TARGET = path.join(process.cwd(),\".\");\r\nconst MyTree = dir2tree(ROOT,{\r\n  fileContent:true,\r\n  sortBy:\"extension\",\r\n  skipFile:[\"ger.md\"],\r\n  skipFolder:[\".git\",\"node_modules\"],\r\n  skipExtension:[\"json\"],\r\n},[markdown_to_html]);\r\n\r\nconsole.log(MyTree.tree)\r\nMyTree.write(TARGET,\"generated.json\")\r\n\r\n",
      "stats": {
        "length": 497,
        "size": 0.4853515625,
        "lines": 18
      },
      "metadata": {
        "created": "2023-10-26T09:56:36.558Z",
        "modified": "2023-10-26T10:39:49.677Z",
        "permissions": 33206
      }
    },
    "index2": {
      "content": "var $cFoub$fs = require(\"fs\");\r\nvar $cFoub$path = require(\"path\");\r\n\r\n\r\n\r\nvar $697a68694f2aacad$exports = {};\r\n/*\r\nDevelopped by zakaria elaloui\r\nGithub : https://github.com/zakarialaoui10\r\n*/ function $697a68694f2aacad$var$flat_obj(obj, depth = Infinity, separator = \".\", replacement = \"_\") {\r\n    const result = {};\r\n    let i = 0;\r\n    function recurse(current, path = []) {\r\n        if (i === depth) {\r\n            Object.assign(result, current);\r\n            return;\r\n        }\r\n        for(const key in current){\r\n            const value = current[key];\r\n            const newPath = [\r\n                ...path,\r\n                key\r\n            ];\r\n            if (typeof value === \"object\" && !Array.isArray(value)) recurse(value, newPath);\r\n            else {\r\n                const flatKey = newPath.join(separator).replace(new RegExp(`\\\\${separator}`, \"g\"), replacement);\r\n                result[flatKey] = value;\r\n            }\r\n            i++;\r\n        }\r\n    }\r\n    recurse(obj);\r\n    return result;\r\n}\r\nconst $697a68694f2aacad$var$mapfun = (fun, { skip: skip = [], key: key = false, value: value = true } = {}, ...X)=>{\r\n    const Y = X.map((x)=>{\r\n        if (typeof skip === \"string\" || [\r\n            null,\r\n            undefined\r\n        ].includes(skip)) skip = [\r\n            skip\r\n        ];\r\n        const skipPrimitives = [];\r\n        const skipObjects = [];\r\n        skip.forEach((element)=>typeof element === \"object\" && element !== null ? skipObjects.push(element) : skipPrimitives.push(element));\r\n        if (skipPrimitives.includes(typeof x) || skipPrimitives.includes(x)) return x;\r\n        if (skipObjects.some((n)=>x instanceof n)) return x;\r\n        if (x === null) return fun(null);\r\n        if ([\r\n            \"number\",\r\n            \"string\",\r\n            \"boolean\",\r\n            \"bigint\",\r\n            \"undefined\"\r\n        ].includes(typeof x)) return fun(x);\r\n        if (typeof x === \"symbol\") throw new Error(\"symbols are not supported yet !\");\r\n        if (x instanceof Array) return x.map((n)=>$697a68694f2aacad$var$mapfun(fun, {}, n));\r\n        if (ArrayBuffer.isView(x)) return Array.from(x).map((n)=>fun(n));\r\n        if (x instanceof Set) return new Set($697a68694f2aacad$var$mapfun(fun, {}, ...[\r\n            ...x\r\n        ]));\r\n        if (x instanceof WeakSet) throw new Error(\"WeakSets not supported yet !\");\r\n        if (x instanceof WeakMap) throw new Error(\"WeakMaps not supported yet !\");\r\n        if (x instanceof Map) return new Map([\r\n            ...x\r\n        ].map((n)=>{\r\n            return [\r\n                key ? $697a68694f2aacad$var$mapfun(fun, {}, n[0]) : n[0],\r\n                value ? $697a68694f2aacad$var$mapfun(fun, {}, n[1]) : n[1]\r\n            ];\r\n        }));\r\n        if (x instanceof Object) return Object.fromEntries(Object.entries(x).map(([KEY, VALUE])=>[\r\n                key ? $697a68694f2aacad$var$mapfun(fun, {}, KEY) : KEY,\r\n                value ? $697a68694f2aacad$var$mapfun(fun, {}, VALUE) : VALUE\r\n            ]));\r\n        else throw new Error(\"Uncategorised data\");\r\n    });\r\n    return Y.length === 1 ? Y[0] : Y;\r\n};\r\n$697a68694f2aacad$exports = {\r\n    mapfun: $697a68694f2aacad$var$mapfun,\r\n    flat_obj: $697a68694f2aacad$var$flat_obj\r\n};\r\n\r\n\r\nvar $2776a60caf88deef$require$mapfun = $697a68694f2aacad$exports.mapfun;\r\nvar $2776a60caf88deef$require$flat_obj = $697a68694f2aacad$exports.flat_obj;\r\nvar $3d93cec531ae9d4c$exports = {};\r\n\r\nfunction $3d93cec531ae9d4c$var$should_skip_file(filePath) {\r\n    const normalizedPath = $cFoub$path.normalize(filePath);\r\n    if (this?.options?.skip?.folder?.includes($cFoub$path.basename(normalizedPath)) || this?.options?.skip?.file?.includes($cFoub$path.basename(normalizedPath)) || this?.options?.skip?.extension?.includes($cFoub$path.extname(normalizedPath).slice(1))) return true;\r\n    return false;\r\n}\r\nfunction $3d93cec531ae9d4c$var$should_skip_folder(filePath) {\r\n    if (typeof filePath !== \"string\") return false;\r\n    const normalizedPath = $cFoub$path.normalize(filePath);\r\n    if (this?.options?.skipFolder?.includes($cFoub$path.basename(normalizedPath))) return true;\r\n    return false;\r\n}\r\n$3d93cec531ae9d4c$exports = {\r\n    should_skip_file: $3d93cec531ae9d4c$var$should_skip_file,\r\n    should_skip_folder: $3d93cec531ae9d4c$var$should_skip_folder\r\n};\r\n\r\n\r\nvar $2776a60caf88deef$require$should_skip_file = $3d93cec531ae9d4c$exports.should_skip_file;\r\nvar $2776a60caf88deef$require$should_skip_folder = $3d93cec531ae9d4c$exports.should_skip_folder;\r\nvar $82c6becc65ef4e6c$exports = {};\r\n\r\n\r\nvar $29ba264081b04b00$exports = {};\r\n\r\n\r\nfunction $29ba264081b04b00$var$is_directory(filePath) {\r\n    return $cFoub$fs.statSync(filePath).isDirectory();\r\n}\r\nfunction $29ba264081b04b00$var$add_to_tree(key, value) {\r\n    const keys = key.split($cFoub$path.sep);\r\n    const lastKeyIndex = keys.length - 1;\r\n    keys.reduce((subtree, currentKey, index)=>{\r\n        if (!subtree[currentKey]) subtree[currentKey] = index === lastKeyIndex ? value : {};\r\n        return subtree[currentKey];\r\n    }, this.tree);\r\n}\r\n$29ba264081b04b00$exports = {\r\n    is_directory: $29ba264081b04b00$var$is_directory,\r\n    add_to_tree: $29ba264081b04b00$var$add_to_tree\r\n};\r\n\r\n\r\nvar $82c6becc65ef4e6c$require$is_directory = $29ba264081b04b00$exports.is_directory;\r\nfunction $82c6becc65ef4e6c$var$sort_files(files, order = 1) {\r\n    return files.sort((a, b)=>{\r\n        const filePathA = $cFoub$path.join(this.root, a);\r\n        const filePathB = $cFoub$path.join(this.root, b);\r\n        // Check if either of the files is a directory and handle accordingly\r\n        const isDirectoryA = $82c6becc65ef4e6c$require$is_directory(filePathA);\r\n        const isDirectoryB = $82c6becc65ef4e6c$require$is_directory(filePathB);\r\n        if (isDirectoryA && !isDirectoryB) return -1; // Directories come before files\r\n        else if (!isDirectoryA && isDirectoryB) return 1; // Files come after directories\r\n        if (isDirectoryA && isDirectoryB) return a.localeCompare(b); // Sort directories by name\r\n        // If both are files, perform the sorting based on your criteria\r\n        const statsA = $cFoub$fs.statSync(filePathA);\r\n        const statsB = $cFoub$fs.statSync(filePathB);\r\n        const extensionA = $cFoub$path.extname(filePathA).slice(1);\r\n        const extensionB = $cFoub$path.extname(filePathB).slice(1);\r\n        const linesA = $cFoub$fs.readFileSync(filePathA, \"utf8\").split(\"\\n\").length;\r\n        const linesB = $cFoub$fs.readFileSync(filePathB, \"utf8\").split(\"\\n\").length;\r\n        // Customize sorting based on sortBy option (name, size, created, modified, extension, lines, path, etc.)\r\n        switch(this.sortBy.toLowerCase()){\r\n            case \"name\":\r\n                return order * a.localeCompare(b);\r\n            case \"size\":\r\n                return order * (statsA.size - statsB.size);\r\n            case \"created\":\r\n                return order * (statsA.birthtime - statsB.birthtime);\r\n            case \"modified\":\r\n                return order * (statsA.mtime.getTime() - statsB.mtime.getTime());\r\n            case \"extension\":\r\n                return order * extensionA.localeCompare(extensionB);\r\n            case \"lines\":\r\n                return order * (linesA - linesB);\r\n            case \"path\":\r\n                return order * filePathB.localeCompare(filePathA);\r\n            default:\r\n                return 0;\r\n        }\r\n    });\r\n}\r\n$82c6becc65ef4e6c$exports = {\r\n    sort_files: $82c6becc65ef4e6c$var$sort_files\r\n};\r\n\r\n\r\nvar $2776a60caf88deef$require$sort_files = $82c6becc65ef4e6c$exports.sort_files;\r\nvar $0b90f1fd7064b3da$exports = {};\r\n\r\n\r\nvar $0b90f1fd7064b3da$require$is_directory = $29ba264081b04b00$exports.is_directory;\r\n\r\nvar $0b90f1fd7064b3da$require$should_skip_file = $3d93cec531ae9d4c$exports.should_skip_file;\r\nfunction $0b90f1fd7064b3da$var$filter_files(files) {\r\n    return files.filter((file)=>{\r\n        if ($0b90f1fd7064b3da$require$is_directory($cFoub$path.join(this.root, file))) return true; // Skip directories\r\n        const filePath = $cFoub$path.join(this.root, file);\r\n        const shouldSkip = $0b90f1fd7064b3da$require$should_skip_file.call(this, filePath);\r\n        return !shouldSkip;\r\n    });\r\n}\r\n$0b90f1fd7064b3da$exports = {\r\n    filter_files: $0b90f1fd7064b3da$var$filter_files\r\n};\r\n\r\n\r\nvar $2776a60caf88deef$require$filter_files = $0b90f1fd7064b3da$exports.filter_files;\r\n\r\nvar $2776a60caf88deef$require$add_to_tree = $29ba264081b04b00$exports.add_to_tree;\r\nvar $30fb452386496690$exports = {};\r\n\r\nfunction $30fb452386496690$var$file_metadata(filePath) {\r\n    const stats = $cFoub$fs.statSync(filePath);\r\n    const metadata = {\r\n        created: stats.birthtime,\r\n        modified: stats.mtime,\r\n        permissions: stats.mode\r\n    };\r\n    return metadata;\r\n}\r\n$30fb452386496690$exports = {\r\n    file_metadata: $30fb452386496690$var$file_metadata\r\n};\r\n\r\n\r\nvar $2776a60caf88deef$require$file_metadata = $30fb452386496690$exports.file_metadata;\r\nclass $2776a60caf88deef$var$Dir2Tree {\r\n    constructor(root, options = {}, callbacks = {}){\r\n        this.root = root;\r\n        this.options = options;\r\n        this.callbacks = callbacks;\r\n        this.tree = {};\r\n        this.sortBy = options.sortBy || \"name\";\r\n        this.generate();\r\n    }\r\n    generate() {\r\n        const stats = $cFoub$fs.statSync(this.root);\r\n        if (!stats.isDirectory()) return null;\r\n        const files = $cFoub$fs.readdirSync(this.root);\r\n        const FILTRED_FILES = $2776a60caf88deef$require$filter_files.call(this, files);\r\n        const SORTED_FILES = $2776a60caf88deef$require$sort_files.call(this, FILTRED_FILES);\r\n        SORTED_FILES.forEach((file)=>{\r\n            const filePath = $cFoub$path.join(this.root, file);\r\n            if ($2776a60caf88deef$require$should_skip_folder.call(this, file)) return;\r\n            const fileStats = $cFoub$fs.statSync(filePath);\r\n            if (fileStats.isDirectory()) {\r\n                const subDirectory = new $2776a60caf88deef$var$Dir2Tree(filePath, this.options, this.callbacks);\r\n                Object.assign(this.tree, {\r\n                    [$cFoub$path.basename(filePath)]: subDirectory.tree\r\n                });\r\n                return this;\r\n            }\r\n            const fileName = $cFoub$path.parse(file).name;\r\n            if ($2776a60caf88deef$require$should_skip_file.call(this, filePath)) return;\r\n            if (this.options?.fileContent) this.addFileInfo(filePath, fileName);\r\n        });\r\n        //this.tree=tree;\r\n        return this.tree;\r\n    }\r\n    addFileInfo(filePath, fileName) {\r\n        const content = $cFoub$fs.readFileSync(filePath, \"utf8\");\r\n        const fileInfo = {};\r\n        const stats = {};\r\n        const fullName = $cFoub$path.basename(filePath);\r\n        const [name, extension] = fullName.split(\".\");\r\n        const length = $cFoub$fs.statSync(filePath).size;\r\n        const lines = content.split(\"\\n\").length;\r\n        const metadata = $2776a60caf88deef$require$file_metadata.call(this, filePath);\r\n        if (this.options?.fileContent) Object.assign(fileInfo, {\r\n            content: content\r\n        });\r\n        if (this.options?.fileExtension) Object.assign(fileInfo, {\r\n            extension: extension\r\n        });\r\n        if (this.options?.fileName) Object.assign(fileInfo, {\r\n            name: name\r\n        });\r\n        Object.assign(stats, {\r\n            length: length\r\n        });\r\n        Object.assign(stats, {\r\n            size: length / 1024\r\n        });\r\n        Object.assign(stats, {\r\n            lines: lines\r\n        });\r\n        Object.assign(fileInfo, {\r\n            stats: stats\r\n        });\r\n        Object.assign(fileInfo, {\r\n            metadata: metadata\r\n        });\r\n        this?.callbacks?.map((n)=>n(filePath, fileInfo));\r\n        $2776a60caf88deef$require$add_to_tree.call(this, fileName + \"_\" + extension, fileInfo);\r\n    }\r\n    write(Target, filename) {\r\n        const jsonTree = JSON.stringify(this.tree, null, 2); // Pretty-print the JSON\r\n        const filePath = $cFoub$path.join(Target, filename); // Construct the file path\r\n        $cFoub$fs.writeFileSync(filePath, jsonTree, \"utf8\");\r\n        console.log(`Tree written to ${filePath}`);\r\n        return this;\r\n    }\r\n    flat(depth = 1, separator = \"_\") {\r\n        this.tree = $2776a60caf88deef$require$flat_obj(this.tree, depth, separator);\r\n        return this;\r\n    }\r\n    reduce() {\r\n        return this;\r\n    }\r\n    sort() {\r\n        return this;\r\n    }\r\n    filter() {\r\n        return this;\r\n    }\r\n    map(callback, options = {}) {\r\n        this.tree = $2776a60caf88deef$require$mapfun(callback, options, this.tree);\r\n        return this;\r\n    }\r\n}\r\nconst $2776a60caf88deef$var$dir2tree = (root, options, callbacks = [])=>new $2776a60caf88deef$var$Dir2Tree(root, options, callbacks);\r\nmodule.exports = $2776a60caf88deef$var$dir2tree;\r\n\r\n\r\n//# sourceMappingURL=index_bundle.js.map\r\n\r\nconst fs=require(\"fs\")\r\nconst path=require(\"path\")\r\nconst dir2tree=$2776a60caf88deef$var$dir2tree;\r\nconst ROOT = path.join(process.cwd(),'.');\r\nconst TARGET = path.join(process.cwd(),\".\");\r\nconsole.log({ROOT,TARGET})\r\nconst MyTree = dir2tree(ROOT,{\r\n  fileContent:true,\r\n  sortBy:\"extension\",\r\n  skipFile:[\"ger.md\"],\r\n  skipFolder:[\"to be skipped\"],\r\n  skipExtension:[\"json\"],\r\n});\r\n\r\nconsole.log(MyTree.tree)\r\nMyTree.write(TARGET,\"generated.json\")\r\n",
      "stats": {
        "length": 13303,
        "size": 12.9912109375,
        "lines": 332
      },
      "metadata": {
        "created": "2023-10-26T09:56:36.559Z",
        "modified": "2023-10-26T10:03:53.349Z",
        "permissions": 33206
      }
    }
  },
  "src": {
    "utils": {
      "filter": {
        "content": "const path=require(\"path\");\r\nconst {is_directory}=require(\"./general.js\");\r\nconst {should_skip_file}=require(\"./skip.js\")\r\nfunction filter_files(files) {\r\n    return files.filter((file) => {\r\n      if (is_directory(path.join(this.root, file))) {\r\n        return true; // Skip directories\r\n      }\r\n      const filePath = path.join(this.root, file);\r\n      const shouldSkip = should_skip_file.call(this, filePath);\r\n      return !shouldSkip;\r\n    });\r\n  }\r\nmodule.exports={filter_files}\r\n",
        "stats": {
          "length": 487,
          "size": 0.4755859375,
          "lines": 15
        },
        "metadata": {
          "created": "2023-10-26T09:56:37.241Z",
          "modified": "2023-10-26T09:56:37.241Z",
          "permissions": 33206
        }
      },
      "general": {
        "content": "const fs=require(\"fs\");\r\nconst path=require(\"path\")\r\nfunction is_directory(filePath) {\r\n    return fs.statSync(filePath).isDirectory();\r\n  }\r\nfunction add_to_tree(key, value) {\r\n  const keys = key.split(path.sep);\r\n  const lastKeyIndex = keys.length - 1;\r\n  keys.reduce((subtree, currentKey, index) => {\r\n    if (!subtree[currentKey]) {\r\n      subtree[currentKey] = index === lastKeyIndex ? value : {};\r\n    }\r\n    return subtree[currentKey];\r\n  }, this.tree);\r\n}\r\nmodule.exports={is_directory,add_to_tree}\r\n",
        "stats": {
          "length": 508,
          "size": 0.49609375,
          "lines": 17
        },
        "metadata": {
          "created": "2023-10-26T09:56:37.242Z",
          "modified": "2023-10-26T09:56:37.242Z",
          "permissions": 33206
        }
      },
      "skip": {
        "content": "const path = require(\"path\");\r\nfunction should_skip_file(filePath) {\r\n    const normalizedPath = path.normalize(filePath);\r\n    if (\r\n      this?.options?.skip?.folder?.includes(path.basename(normalizedPath)) ||\r\n      this?.options?.skip?.file?.includes(path.basename(normalizedPath)) ||\r\n      this?.options?.skip?.extension?.includes(\r\n        path.extname(normalizedPath).slice(1)\r\n      )\r\n    )return true;\r\n    return false;\r\n  }\r\nfunction should_skip_folder(filePath) {\r\n  if (typeof filePath !== 'string') return false;\r\n  const normalizedPath = path.normalize(filePath);\r\n  if (this?.options?.skipFolder?.includes(path.basename(normalizedPath)))\r\n    return true;\r\n  return false;\r\n  }\r\nmodule.exports={should_skip_file,should_skip_folder}\r\n",
        "stats": {
          "length": 751,
          "size": 0.7333984375,
          "lines": 21
        },
        "metadata": {
          "created": "2023-10-26T09:56:37.243Z",
          "modified": "2023-10-26T09:56:37.243Z",
          "permissions": 33206
        }
      },
      "sort": {
        "content": "const path=require(\"path\");\r\nconst fs=require(\"fs\")\r\nconst {is_directory}=require(\"./general.js\");\r\nfunction sort_files(files, order = 1) {\r\n    return files.sort((a, b) => {\r\n      const filePathA = path.join(this.root, a);\r\n      const filePathB = path.join(this.root, b);\r\n  \r\n      // Check if either of the files is a directory and handle accordingly\r\n      const isDirectoryA = is_directory(filePathA);\r\n      const isDirectoryB = is_directory(filePathB);\r\n  \r\n      if (isDirectoryA && !isDirectoryB) {\r\n        return -1; // Directories come before files\r\n      } else if (!isDirectoryA && isDirectoryB) {\r\n        return 1; // Files come after directories\r\n      }\r\n  \r\n      if (isDirectoryA && isDirectoryB) {\r\n        return a.localeCompare(b); // Sort directories by name\r\n      }\r\n  \r\n      // If both are files, perform the sorting based on your criteria\r\n      const statsA = fs.statSync(filePathA);\r\n      const statsB = fs.statSync(filePathB);\r\n      const extensionA = path.extname(filePathA).slice(1);\r\n      const extensionB = path.extname(filePathB).slice(1);\r\n      const linesA = fs.readFileSync(filePathA, \"utf8\").split(\"\\n\").length;\r\n      const linesB = fs.readFileSync(filePathB, \"utf8\").split(\"\\n\").length;\r\n  \r\n      // Customize sorting based on sortBy option (name, size, created, modified, extension, lines, path, etc.)\r\n      switch (this.sortBy.toLowerCase()) {\r\n        case \"name\":\r\n          return order * a.localeCompare(b);\r\n        case \"size\":\r\n          return order * (statsA.size - statsB.size);\r\n        case \"created\":\r\n          return order * (statsA.birthtime - statsB.birthtime);\r\n        case \"modified\":\r\n          return order * (statsA.mtime.getTime() - statsB.mtime.getTime());\r\n        case \"extension\":\r\n          return order * extensionA.localeCompare(extensionB);\r\n        case \"lines\":\r\n          return order * (linesA - linesB);\r\n        case \"path\":\r\n          return order * filePathB.localeCompare(filePathA);\r\n        default:\r\n          return 0;\r\n      }\r\n    });\r\n  }\r\n\r\nmodule.exports={sort_files}\r\n",
        "stats": {
          "length": 2072,
          "size": 2.0234375,
          "lines": 54
        },
        "metadata": {
          "created": "2023-10-26T09:56:37.244Z",
          "modified": "2023-10-26T09:56:37.244Z",
          "permissions": 33206
        }
      },
      "stats": {
        "content": "const fs=require(\"fs\");\r\nfunction file_metadata(filePath) {\r\n    const stats = fs.statSync(filePath);\r\n    const metadata = {\r\n      created: stats.birthtime,\r\n      modified: stats.mtime,\r\n      permissions: stats.mode,\r\n    };\r\n    return metadata;\r\n  }\r\nmodule.exports={file_metadata}\r\n",
        "stats": {
          "length": 289,
          "size": 0.2822265625,
          "lines": 12
        },
        "metadata": {
          "created": "2023-10-26T09:56:37.245Z",
          "modified": "2023-10-26T09:56:37.253Z",
          "permissions": 33206
        }
      }
    },
    "index": {
      "content": "const fs = require(\"fs\");\r\nconst path = require(\"path\");\r\nconst {mapfun,flat_obj}=require(\"mapfun\")\r\nconst {should_skip_file,should_skip_folder}=require(\"./utils/skip.js\");\r\nconst {sort_files}=require(\"./utils/sort.js\");\r\nconst {filter_files}=require(\"./utils/filter.js\");\r\nconst {add_to_tree}=require(\"./utils/general.js\");\r\nconst {file_metadata}=require(\"./utils/stats.js\");\r\n\r\nclass Dir2Tree {\r\n  constructor(root, options = {}, callbacks = {}) {\r\n    this.root = root;\r\n    this.options = options;\r\n    this.callbacks = callbacks;\r\n    this.tree = {};\r\n    this.sortBy = options.sortBy || \"name\";\r\n    this.generate();\r\n  }\r\n  generate() {\r\n    const stats = fs.statSync(this.root);\r\n    if (!stats.isDirectory()) return null;\r\n    const files = fs.readdirSync(this.root);\r\n    const FILTRED_FILES = filter_files.call(this, files);\r\n    const SORTED_FILES = sort_files.call(this, FILTRED_FILES);\r\n\r\n    SORTED_FILES.forEach((file) => {\r\n      const filePath = path.join(this.root, file);\r\n      if(should_skip_folder.call(this,file))return;\r\n      const fileStats = fs.statSync(filePath);\r\n      if(fileStats.isDirectory()){\r\n        const subDirectory = new Dir2Tree(\r\n          filePath,\r\n          this.options,\r\n          this.callbacks\r\n        );\r\n        Object.assign(this.tree,{[path.basename(filePath)]:subDirectory.tree})\r\n        return this\r\n      }\r\n      const fileName = path.parse(file).name;\r\n      if (should_skip_file.call(this, filePath)) return;\r\n        if (this.options?.fileContent) {\r\n          this.addFileInfo(filePath, fileName);\r\n        }\r\n      \r\n    });\r\n    //this.tree=tree;\r\n    return this.tree;\r\n  }\r\n  addFileInfo(filePath, fileName) {\r\n    const content = fs.readFileSync(filePath, \"utf8\");\r\n    const fileInfo = {};\r\n    const stats = {};\r\n    const fullName = path.basename(filePath);\r\n    const [name, extension] = fullName.split(\".\");\r\n    const length = fs.statSync(filePath).size;\r\n    const lines = content.split(\"\\n\").length;\r\n    const metadata = file_metadata.call(this, filePath);\r\n    if (this.options?.fileContent) Object.assign(fileInfo, { content });\r\n    if (this.options?.fileExtension) Object.assign(fileInfo, { extension });\r\n    if (this.options?.fileName) Object.assign(fileInfo, { name });\r\n    Object.assign(stats, { length });\r\n    Object.assign(stats, { size: length / 1024 });\r\n    Object.assign(stats, { lines });\r\n    Object.assign(fileInfo, { stats });\r\n    Object.assign(fileInfo, { metadata });\r\n    this?.callbacks?.map((n) => n(filePath, fileInfo));\r\n    add_to_tree.call(this,fileName+\"_\"+extension, fileInfo);\r\n  }\r\n  \r\n  write(Target, filename) {\r\n    const jsonTree = JSON.stringify(this.tree, null, 2); // Pretty-print the JSON\r\n    const filePath = path.join(Target, filename); // Construct the file path\r\n    fs.writeFileSync(filePath, jsonTree, 'utf8');\r\n    console.log(`Tree written to ${filePath}`);\r\n    return this;\r\n  }\r\n  flat(depth=1,separator=\"_\"){\r\n    this.tree=flat_obj(this.tree,depth,separator);\r\n    return this;\r\n  }\r\n  reduce(){\r\n    return this;\r\n  }\r\n  sort(){\r\n    return this;\r\n  }\r\n  filter(){\r\n    return this;\r\n  }\r\n  map(callback,options={}){\r\n    this.tree=mapfun(callback,options,this.tree);\r\n    return this;\r\n  }\r\n}\r\nconst dir2tree = (root, options, callbacks=[]) => new Dir2Tree(root, options, callbacks);\r\nmodule.exports = dir2tree;\r\n",
      "stats": {
        "length": 3350,
        "size": 3.271484375,
        "lines": 97
      },
      "metadata": {
        "created": "2023-10-26T09:56:37.238Z",
        "modified": "2023-10-26T10:24:38.120Z",
        "permissions": 33206
      }
    }
  },
  ".gitignore": {
    "content": "node_modules\r\n",
    "stats": {
      "length": 14,
      "size": 0.013671875,
      "lines": 2
    },
    "metadata": {
      "created": "2023-10-26T09:56:36.554Z",
      "modified": "2023-10-26T09:56:36.554Z",
      "permissions": 33206
    }
  },
  ".npmignore": {
    "content": "action.yml\r\ntest.js\r\n.gitignore\r\n_test_fs.js\r\nExamples/\r\n.github/\r\nAutomation/\r\n*.json\r\n",
    "stats": {
      "length": 88,
      "size": 0.0859375,
      "lines": 9
    },
    "metadata": {
      "created": "2023-10-26T09:56:36.554Z",
      "modified": "2023-10-26T09:56:36.554Z",
      "permissions": 33206
    }
  },
  "LICENSE": {
    "content": "MIT License\r\n\r\nCopyright (c) 2023 ZAKARIA ELALAOUI\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n",
    "stats": {
      "length": 1094,
      "size": 1.068359375,
      "lines": 22
    },
    "metadata": {
      "created": "2023-10-26T09:56:36.561Z",
      "modified": "2023-10-26T09:56:36.562Z",
      "permissions": 33206
    }
  },
  "README": {
    "content": "## Demo \r\n[Want to try !](https://replit.com/@zakariaelalaoui/dir2tree#generated.json)\r\n## Install ![npm](https://img.shields.io/npm/v/dir2tree)\r\n```bash\r\nnpm install dir2tree\r\n```\r\n## Import\r\n### Common Js\r\n```js\r\nconst dir2tree=require(\"dir2tree\")\r\n```\r\n### Es Module\r\n```js\r\nimport dir2tree from dir2tree\r\n```\r\n## Syntaxe\r\n### Initialise\r\n```js\r\nconst MyTree=dire2tree(ROOT,OPTIONS,CALLBACKS)\r\nMyTree.write(Target,\"generated_file.json\")\r\n```\r\n#### Arguments\r\n- **`ROOT`** : The path to the root directory that we want handle. it's ***`required`***\r\n- **`OPTIONS`** : An object containing various configuration options to control the behavior of the tree generation.it's ***`optional`*** , These options might include :\r\n  - **`fileContent`** : (***Boolean***)\r\n  - **`fileName`** : (***Boolean***)\r\n  - **`fileExtension`** : (***Boolean***)\r\n  - **`length`** : (***Boolean***)\r\n  - **`size`** : (***Boolean***)\r\n  - **`linesCount`** : (***Boolean***)\r\n  - **`created`** : (***Boolean***)\r\n  - **`lastModified`** : (***Boolean***)\r\n  - **`skip`** :\r\n    - **`folder`** : (***String[]***)\r\n    - **`file`** : (***String[]***)\r\n    - **`extension`** : (***String[]***)\r\n  - **`sortBy`** : (***String***) , possible values : `\"names\"`,`\"extension\"`,`\"size\"`,`\"lines\"`,`\"created\"`,`\"lastmodified\"`,\r\n  - **`order`** : (***Number***)\r\n- **`CALLBACKS`** : it's ***`optional`***\r\n### Methodes\r\n- **`.write(Target, filename)`**\r\n- **`.flat(depth, separator)`**\r\n### Use It in your Github Repository\r\n```mermaid\r\nsequenceDiagram\r\n    Your repository ->> dir2tree: ...\r\n    dir2tree-->>Your repository:...\r\n```\r\nCreate a workflow file like the one below.\r\n.github/workflow/dir2tree.yml\r\n```yml\r\nname: Generate Directory Tree using zakarialaoui10/dir2tree\r\non:\r\n  push: \r\n    branches:\r\n      - main\r\njobs:\r\n  build:\r\n    permissions :\r\n      contents : write\r\n    runs-on: ubuntu-latest\r\n    steps:\r\n      - name: Checkout code\r\n        uses: actions/checkout@v2\r\n        with:\r\n          ref: ${{ github.head_ref }}\r\n      - name: Generate Directory Tree\r\n        uses: zakarialaoui10/dir2tree@main\r\n      - name: Commit & Push\r\n        run: |\r\n          git config user.name github-actions\r\n          git config user.email github-actions@github.com\r\n          git add -A .\r\n          git commit -m \"generated by zakarialaoui10/dir2tree\"\r\n          git push\r\n        env:\r\n          CUSTOM_TOKEN: ${{ secrets.CUSTOM_TOKEN }}\r\n```\r\n## License \r\nThis projet is licensed under the terms of MIT License .<br>\r\n<img src=\"https://img.shields.io/github/license/zakarialaoui10/zikojs?color=rgb%2820%2C21%2C169%29\">\r\n",
    "stats": {
      "length": 2601,
      "size": 2.5400390625,
      "lines": 82
    },
    "metadata": {
      "created": "2023-10-26T09:56:36.562Z",
      "modified": "2023-10-26T09:56:36.562Z",
      "permissions": 33206
    },
    "html": "<h2>Demo</h2>\n<p><a href=\"https://replit.com/@zakariaelalaoui/dir2tree#generated.json\">Want to try !</a></p>\n<h2>Install <img src=\"https://img.shields.io/npm/v/dir2tree\" alt=\"npm\"></h2>\n<pre><code class=\"language-bash\">npm install dir2tree\n</code></pre>\n<h2>Import</h2>\n<h3>Common Js</h3>\n<pre><code class=\"language-js\">const dir2tree=require(&quot;dir2tree&quot;)\n</code></pre>\n<h3>Es Module</h3>\n<pre><code class=\"language-js\">import dir2tree from dir2tree\n</code></pre>\n<h2>Syntaxe</h2>\n<h3>Initialise</h3>\n<pre><code class=\"language-js\">const MyTree=dire2tree(ROOT,OPTIONS,CALLBACKS)\nMyTree.write(Target,&quot;generated_file.json&quot;)\n</code></pre>\n<h4>Arguments</h4>\n<ul>\n<li><strong><code>ROOT</code></strong> : The path to the root directory that we want handle. it&#39;s <em><strong><code>required</code></strong></em></li>\n<li><strong><code>OPTIONS</code></strong> : An object containing various configuration options to control the behavior of the tree generation.it&#39;s <em><strong><code>optional</code></strong></em> , These options might include :<ul>\n<li><strong><code>fileContent</code></strong> : (<em><strong>Boolean</strong></em>)</li>\n<li><strong><code>fileName</code></strong> : (<em><strong>Boolean</strong></em>)</li>\n<li><strong><code>fileExtension</code></strong> : (<em><strong>Boolean</strong></em>)</li>\n<li><strong><code>length</code></strong> : (<em><strong>Boolean</strong></em>)</li>\n<li><strong><code>size</code></strong> : (<em><strong>Boolean</strong></em>)</li>\n<li><strong><code>linesCount</code></strong> : (<em><strong>Boolean</strong></em>)</li>\n<li><strong><code>created</code></strong> : (<em><strong>Boolean</strong></em>)</li>\n<li><strong><code>lastModified</code></strong> : (<em><strong>Boolean</strong></em>)</li>\n<li><strong><code>skip</code></strong> :<ul>\n<li><strong><code>folder</code></strong> : (<em><strong>String[]</strong></em>)</li>\n<li><strong><code>file</code></strong> : (<em><strong>String[]</strong></em>)</li>\n<li><strong><code>extension</code></strong> : (<em><strong>String[]</strong></em>)</li>\n</ul>\n</li>\n<li><strong><code>sortBy</code></strong> : (<em><strong>String</strong></em>) , possible values : <code>&quot;names&quot;</code>,<code>&quot;extension&quot;</code>,<code>&quot;size&quot;</code>,<code>&quot;lines&quot;</code>,<code>&quot;created&quot;</code>,<code>&quot;lastmodified&quot;</code>,</li>\n<li><strong><code>order</code></strong> : (<em><strong>Number</strong></em>)</li>\n</ul>\n</li>\n<li><strong><code>CALLBACKS</code></strong> : it&#39;s <em><strong><code>optional</code></strong></em></li>\n</ul>\n<h3>Methodes</h3>\n<ul>\n<li><strong><code>.write(Target, filename)</code></strong></li>\n<li><strong><code>.flat(depth, separator)</code></strong></li>\n</ul>\n<h3>Use It in your Github Repository</h3>\n<pre><code class=\"language-mermaid\">sequenceDiagram\n    Your repository -&gt;&gt; dir2tree: ...\n    dir2tree--&gt;&gt;Your repository:...\n</code></pre>\n<p>Create a workflow file like the one below.\n.github/workflow/dir2tree.yml</p>\n<pre><code class=\"language-yml\">name: Generate Directory Tree using zakarialaoui10/dir2tree\non:\n  push: \n    branches:\n      - main\njobs:\n  build:\n    permissions :\n      contents : write\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v2\n        with:\n          ref: ${{ github.head_ref }}\n      - name: Generate Directory Tree\n        uses: zakarialaoui10/dir2tree@main\n      - name: Commit &amp; Push\n        run: |\n          git config user.name github-actions\n          git config user.email github-actions@github.com\n          git add -A .\n          git commit -m &quot;generated by zakarialaoui10/dir2tree&quot;\n          git push\n        env:\n          CUSTOM_TOKEN: ${{ secrets.CUSTOM_TOKEN }}\n</code></pre>\n<h2>License</h2>\n<p>This projet is licensed under the terms of MIT License .<br>\n<img src=\"https://img.shields.io/github/license/zakarialaoui10/zikojs?color=rgb%2820%2C21%2C169%29\"></p>\n"
  },
  "action": {
    "content": "name: 'Master'\r\ndescription: 'dir2tree'\r\nruns:\r\n  using: 'node16'\r\n  main: 'Automation/index2.js'\r\n",
    "stats": {
      "length": 99,
      "size": 0.0966796875,
      "lines": 6
    },
    "metadata": {
      "created": "2023-10-26T09:56:36.562Z",
      "modified": "2023-10-26T09:56:36.562Z",
      "permissions": 33206
    }
  }
}